<program>        → <function list> <program'>
                 | <instruction list> <program'>

<program'>       → <function list> <program'>
                 | <instruction list> <program'>
		 | ε

<function list>  → <function> <function list'>
                 
<function list'> → <function> <function list'>
		 | ε

<function>       → 'sub' identifier <function args>
                   '{' <instruction list> '}'

<function args>  → '(' <arg list> ')'
                 | ε

<arg list>       → <arg list> ',' var
                 | ε

<instr list>     → <instr list> ';' <instr>
                 | '{' <instr list> '}'
                 | <instr> ';'
                 | <instr>

<funcall>        → '&' identifier
                 | '&' identifier <funcall args>
                 | identifier
                 | identifier <funcall args>

<funcall args>   → '(' <args call list> ')'
                 | <args call list>
                 | ε

<args call list> → <instr> <args call list'>
                 | ε

<args call list'>→ ',' <instr> <args call list'>
                 | ε

<instr>          → <cond>
                 | <expr>
                 | 'return' <expr>

<cond>           → <expr> 'if' <expr>
                 | <expr> 'unless' <expr>
                 | 'if' <expr> '{' <instr list> '}' <cond end>
                 | 'unless' <expr> '{' <instr list> '}' <cond end>

<cond end>       → 'else' <expr> '{' <instr list> '}' <cond end>
                 | 'elsif' <expr> '{' <instr list> '}' <cond end>
                 | ε

<simple expr>    → <funcall>
                 | var
                 | integer
                 | string

<expr>           → <simple expr>
                 | 'not' <expr>
                 | <expr-comma>

<expr-comma>     → <expr-assign> <expr-comma'>

<expr-comma'>    → ',' <expr-assign> <expr-comma'>
                 | ε

<expr-assign>    → <expr-or> '=' <expr-assign>
                 | <expr-or>

<expr-or>        → <expr-and> <expr-or'>

<expr-or'>       → '||' <expr-and> <expr-or'>
                 | ε

<expr-and>       → <expr-eq> <expr-and'>

<expr-and'>      → '&&' <expr-eq> <expr-and'>
                 | ε

<expr-eq>        → <expr-eq'>
                 | <comp>

<expr-eq'>       → '==' <expr-eq'>
                 | '!=' <expr-eq'>
                 | 'eq' <expr-eq'>
                 | 'ne' <expr-eq'>
                 | <comp>

<comp>           → <comp'>
                 | <calc>

<comp'>          → '>' <comp'>
                 | '<' <comp'>
                 | '>=' <comp'>
                 | '<=' <comp'>
                 | 'lt' <comp'>
                 | 'gt' <comp'>
                 | 'le' <comp'>
                 | 'ge' <comp'>
                 | <calc>

<calc>           → <term> <calc'>

<calc'>          → '+' <term> <calc'>
                 | '-' <term> <calc'>
                 | '.' <term> <calc'>
                 | ε
                 
<term>           → <factor> <term'>

<term'>          → '*' <factor> <term'>
                 | '/' <factor> <term'>
                 | ε

<factor>         → <simple expr>
                 | '(' <expr> ')'
                 | '!' <expr>
                 | '+' <expr>
                 | '-' <expr>
